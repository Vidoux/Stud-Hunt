DROP TABLE APP_USER CASCADE CONSTRAINTS PURGE
/
DROP TABLE COMPANY CASCADE CONSTRAINTS PURGE
/
DROP TABLE STUDENT CASCADE CONSTRAINTS PURGE
/
DROP TABLE PROJECT CASCADE CONSTRAINTS PURGE
/
DROP TABLE CV CASCADE CONSTRAINTS PURGE
/
DROP TABLE PROFILE_PICTURE CASCADE CONSTRAINTS PURGE
/
DROP TABLE JOB_OFFER CASCADE CONSTRAINTS PURGE
/
DROP TABLE INDUSTRY CASCADE CONSTRAINTS PURGE
/
DROP TABLE SCHOOL CASCADE CONSTRAINTS PURGE
/
DROP TABLE ADMIN CASCADE CONSTRAINTS PURGE
/
DROP TABLE refer_to CASCADE CONSTRAINTS PURGE
/
DROP TABLE concern CASCADE CONSTRAINTS PURGE
/
DROP TABLE is_part_of CASCADE CONSTRAINTS PURGE
/

DROP SEQUENCE ID_PROJECT_SEQ
/
DROP SEQUENCE ID_JOBOFFER_SEQ
/
DROP SEQUENCE ID_INDUSTRY_SEQ
/
DROP SEQUENCE ID_SCHOOL_SEQ
/
CREATE SEQUENCE ID_PROJECT_SEQ
/
CREATE SEQUENCE ID_JOBOFFER_SEQ
/
CREATE SEQUENCE ID_INDUSTRY_SEQ
/
CREATE SEQUENCE ID_SCHOOL_SEQ
/

CREATE TABLE APP_USER(
   email VARCHAR(50),
   name VARCHAR(20) NOT NULL,
   password VARCHAR(30) NOT NULL,
   PRIMARY KEY(email)
);

CREATE TABLE COMPANY(
   email VARCHAR(50),
   PRIMARY KEY(email),
   FOREIGN KEY(email) REFERENCES APP_USER(email)
);

CREATE TABLE STUDENT(
   email VARCHAR(50),
   forname VARCHAR(20) NOT NULL,
   apprenticeship NUMBER(1) NOT NULL,
   internship NUMBER(1) NOT NULL,
   PRIMARY KEY(email),
   FOREIGN KEY(email) REFERENCES APP_USER(email)
);

CREATE TABLE ADMIN(
   email VARCHAR(50),
   PRIMARY KEY(email),
   FOREIGN KEY(email) REFERENCES APP_USER(email)
);

CREATE TABLE CV(
   email VARCHAR(50),
   linkedFile BLOB,
   PRIMARY KEY(email),
   FOREIGN KEY(email) REFERENCES STUDENT(email)
);

CREATE TABLE PROFILE_PICTURE(
   email VARCHAR(50),
   linkedFile BLOB NOT NULL,
   PRIMARY KEY(email),
   FOREIGN KEY(email) REFERENCES APP_USER(email)
);

CREATE TABLE PROJECT(
   id_Project INTEGER,
   projectName VARCHAR(30),
   realisation_year NUMBER(4) NOT NULL,
   email VARCHAR(50) NOT NULL,
   PRIMARY KEY(id_Project),
   FOREIGN KEY(email) REFERENCES STUDENT(email)
);

CREATE TABLE JOB_OFFER(
   id_JobOffer INTEGER,
   offerType INTEGER NOT NULL,
   email VARCHAR(50) NOT NULL,
   PRIMARY KEY(id_JobOffer),
   FOREIGN KEY(email) REFERENCES COMPANY(email)
);

CREATE TABLE INDUSTRY(
   id_Industry INTEGER,
   industryName VARCHAR(20),
   PRIMARY KEY(id_Industry)
);

CREATE TABLE SCHOOL(
   id_School INTEGER,
   schoolName VARCHAR(20),
   PRIMARY KEY(id_School)
);

CREATE TABLE refer_to(
   id_Industry INTEGER,
   email VARCHAR(50),
   PRIMARY KEY(id_Industry, email),
   FOREIGN KEY(id_Industry) REFERENCES INDUSTRY(id_Industry),
   FOREIGN KEY(email) REFERENCES COMPANY(email)
);

CREATE TABLE concern(
   id_Industry INTEGER,
   email VARCHAR(50),
   PRIMARY KEY(id_Industry, email),
   FOREIGN KEY(id_Industry) REFERENCES INDUSTRY(id_Industry),
   FOREIGN KEY(email) REFERENCES STUDENT(email)
);

CREATE TABLE is_part_of(
   id_School INTEGER,
   email VARCHAR(50),
   PRIMARY KEY(id_School, email),
   FOREIGN KEY(id_School) REFERENCES SCHOOL(id_School),
   FOREIGN KEY(email) REFERENCES STUDENT(email)
);